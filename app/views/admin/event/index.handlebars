<div class="card">
    <div class="card-header" >
        <i class="fa fa-align-justify"></i>List Product
    </div>
     {{#if messages.msg_info}}
    <div class="alert alert-success alert-dismissible">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
        <h5><i class="icon fas fa-check"></i> Success!</h5>
        {{messages.msg_info}}
    </div>
    {{/if}}
    {{#if messages.msg_error}}
    <div class="alert alert-danger alert-dismissible">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
        <h5><i class="icon fas fa-ban"></i> Alert!</h5>
        {{messages.msg_error}}
    </div>
    {{/if}}

    <div class="card-body">
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="@mdo" data-id="">Tambahkan Event</button>
                <br/>
        <br/>
        <br/>
        <table class="table table-responsive-sm table-bordered data-table">
            <colgroup>
                <col span="1" style="width: 2%; height: 70px;">
                <col span="1" style="width: 15%; height: 70px;">
                <col span="1" style="width: 10%; height: 70px;">
                <col span="1" style="width: 20%; height: 70px;">
                <col span="1" style="width: 10%; height: 70px;">
                <col span="1" style="width: 20%; height: 70px;">
                <col span="1" style="width: 20%; height: 70px;">
               
            </colgroup>

            <thead>
                <tr>
                    <th>No</th>
                    <th>Nama Event</th>
                    <th>Date</th>
                    <th>Time</th>
                    <th>Lokasi</th>
                     <th>Diaktifkan</th>
                    <th>Action</th>
                </tr>
            </thead>
               <tbody>
                {{#each list_event}}
                <tr>
                    <td>{{no}}</td>
                    <td>{{name}}</td>
                    <td>{{date start_time}}</td>
                    <td>{{TimeHourMinute start_time}}</td>
                    <td>{{location}}</td>
                     <td>{{is_active}}</td>
                    <td>
                        <form action="/admin/delete-event/{{id}}"  method="post">
                        <a class="btn btn-secondary btn-sm" href="/admin/listevent/{{id}}">
                            <i class="fas fa-pencil-alt pr-1"></i>
                            Edit
                        </a>
                        <button type="submit" onclick="return confirm('Apakah kamu yakin ingin delete event ini?')" data-toggle="tooltip" data-original-title="Delete" class="delete btn btn-sm  btn-danger  deleteProduct"><i class="fa fa-trash"></i>Delete</a> &nbsp;
                   </form>
                   </td>
                </tr>
                {{/each}}
            </tbody>

        </table>
        
   <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <form action="/admin/input-event" method="post" enctype="multipart/form-data">
                <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Tambahkan Event</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                <div class="col-sm-12 form-group">
                    <label for="end_time">Nama</label>
                    <input class="form-control" id="name" name="name" type="text" required>
                </div>
                  <div class="col-sm-12 form-group">
                    <label for="tanggal">Waktu Mulai</label>
                    <input class="form-control" id="start_time" name="start_time" type="datetime-local" required>
                </div>               
                <div class="col-sm-12 form-group">
                <label for="product">Diaktifkan</label>
                    <select class="form-control" id="is_active" name="is_active" data-live-search="true" >
                    <option value="1">Aktif</option>
                    <option value="0">Tidak Aktif</option>                   
                </select>
              </div>
              
                <div class="col-sm-12 form-group price_div">
                    <label for="title">Lokasi</label>
                    <input class="form-control" id="location" name="location"  type="text" >
                </div>
                <div class="col-sm-12 form-group">
                    <label for="image">Gambar</label>
                    <input class="form-control" id="image" name="image" type="file" accept="image/*" onchange="PreviewImage();" placeholder="Masukan Gambar">
                    <img id="uploadPreview" style="width:100%;max-width:200px" />
                </div>
              
                <div class="">
                    <button class="btn btn-sm btn-primary" id="save" type="submit">
                    <i class="fa fa-dot-circle-o"></i> Simpan</button>
                    <button type="button" class="btn btn-primary" id="loadingbutton" disabled>  <span class="spinner-border spinner-border-sm"></span>Loading</button>
                </div>
                    </br>
                    </form>
                </div>
                </div>
                </div>
                </div>
        <br/>

    </div>
</div>

<script type="text/javascript">
function PreviewImage() {
var oFReader = new FileReader();
oFReader.readAsDataURL(document.getElementById("image").files[0]);
oFReader.onload = function (oFREvent)
 {
    document.getElementById("uploadPreview").src = oFREvent.target.result;
};
};

$('#loadingbutton').hide();
$(function(){
    $('form').submit(function(e){
        e.preventDefault();
        $('#loadingbutton').show();
        $('#save').hide();
        e.currentTarget.submit();
    })
});


</script>